{% extends "action/base.html" %}

{% block content %}
<div class="activity-details">
    <h2>{{ activity.activity_name }}</h2>
    <p><strong>Owner:</strong> {{ activity.owner.username }}</p>
    <p><strong>Date Published:</strong> {{ activity.pub_date }}</p>
    <p><strong>End Date:</strong> {{ activity.end_date }}</p>
    <p><strong>Time of Activity:</strong> {{ activity.activity_date }}</p>
    <p><strong>Description:</strong> {{ activity.description }}</p>
    <p><strong>Place:</strong> {{ activity.place }}</p>

    <h3>Tags:</h3>
    <ul>
    {% for tag in activity.tags.all %}
        <li>{{ tag.name }}</li>
    {% empty %}
        <li>No tags available for this activity.</li>
    {% endfor %}
    </ul>
</div>

{% if user.is_authenticated %}
    {% if has_participated %}
        <form method="post" action="{% url 'action:withdraw' activity.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Withdraw</button>
        </form>
    <p>You are currently participating in this activity.</p>
    {% else %}
    <form method="post" action="{% url 'action:participate' activity.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary">Participate</button>
    </form>
        <p>Click the "Participate" button to join this activity.</p>
    {% endif %}
{% else %}
    <p>Login to participate in this activity.</p>
{% endif %}

{% endblock %}